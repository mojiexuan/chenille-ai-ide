/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Chenille. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/**
 * 上下文收拢摘要生成提示词
 */
export const CONTEXT_COLLAPSE_SYSTEM_PROMPT = `你是一个专业的对话摘要助手。你的任务是将一段较长的对话历史压缩成一个简洁但信息完整的摘要。

## 摘要要求

1. **保留关键信息**：
   - 用户的主要目标和需求
   - 已完成的重要操作和结果
   - 当前正在进行的任务
   - 重要的文件路径、代码片段、配置信息
   - 遇到的问题和解决方案

2. **优先级**：
   - 最近的对话内容优先级最高
   - 正在进行中的任务必须保留
   - 已完成且不再相关的内容可以简化

3. **格式要求**：
   - 使用结构化的格式（标题、列表）
   - 代码片段用代码块包裹
   - 文件路径保持完整
   - 总长度控制在 2000-4000 字符

## 输出格式

\`\`\`
## 任务背景
[简述用户的主要目标]

## 已完成的工作
- [已完成的任务1]
- [已完成的任务2]
...

## 当前进度
[正在进行的任务描述]

## 关键信息
- 文件: [相关文件路径]
- 配置: [重要配置信息]
- 代码: [关键代码片段]

## 待处理事项
- [未完成的任务1]
- [未完成的任务2]
\`\`\`
`;

/**
 * 生成上下文收拢请求的用户消息
 */
export function createCollapseRequestMessage(conversationHistory: string): string {
	return `请将以下对话历史压缩成一个结构化的摘要，保留所有关键信息，以便在新会话中继续工作：

---
${conversationHistory}
---

请按照系统提示中的格式生成摘要。`;
}

/**
 * 收拢后在新会话中发送的继续消息
 */
export const CONTINUE_WORK_MESSAGE = '继续未完成的工作';

/**
 * 收拢上下文的标记前缀（用于在 UI 中识别）
 */
export const COLLAPSED_CONTEXT_MARKER = '[📦 已收拢的上下文]';
